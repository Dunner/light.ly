

<div class="dnr-cornice" ></div>
<div dnr-splitter class="dnr-splitter" >
  <div class="dnr-side-feed" ng-controller="FeedCtrl">
    <div class="dnr-switch-bar">
      <ul class="dnr-social-nav-links">
      <!-- News -->
        <li class="item1" tooltip="News feed" ng-click="changeFeed('news')" ng-class="{'active':activeFeed === 'news'}">
          <h4>
            <svg class="svg-icon" viewBox="0 0 20 20">
              <path fill="none" d="M1.683,3.39h16.676C18.713,3.39,19,3.103,19,2.749s-0.287-0.642-0.642-0.642H1.683 c-0.354,0-0.641,0.287-0.641,0.642S1.328,3.39,1.683,3.39z M1.683,7.879h11.545c0.354,0,0.642-0.287,0.642-0.641 s-0.287-0.642-0.642-0.642H1.683c-0.354,0-0.641,0.287-0.641,0.642S1.328,7.879,1.683,7.879z M18.358,11.087H1.683 c-0.354,0-0.641,0.286-0.641,0.641s0.287,0.642,0.641,0.642h16.676c0.354,0,0.642-0.287,0.642-0.642S18.713,11.087,18.358,11.087z M11.304,15.576H1.683c-0.354,0-0.641,0.287-0.641,0.642s0.287,0.641,0.641,0.641h9.621c0.354,0,0.642-0.286,0.642-0.641 S11.657,15.576,11.304,15.576z"></path>
            </svg>
          </h4>
        </li>
        <!-- Global -->
        <li class="item2" tooltip="Global chat" ng-click="changeFeed('global')" ng-class="{'active':activeFeed === 'global', 'pulsate': unreadGlobal !== 0}" data-unread="{{unreadGlobal}}">
          <h4>
            <div class="dnr-feed-bubble" ng-show="unreadGlobal !== 0">{{unreadGlobal}}</div>
            <svg class="svg-icon" viewBox="0 0 20 20">
              <path fill="none" d="M14.9,6.707c-0.804-2.497-3.649-4.351-7.035-4.351c-4.008,0-7.27,2.594-7.27,5.782 c0,2.163,1.516,4.133,3.903,5.122v3.091c0,0.251,0.144,0.478,0.372,0.586c0.087,0.042,0.182,0.062,0.276,0.062 c0.148,0,0.295-0.051,0.412-0.15l3.678-3.038c0.14-0.022,0.275-0.057,0.413-0.084c0.655,0.666,1.544,1.185,2.607,1.46 c0.198,0.051,0.401,0.094,0.608,0.125l2.641,2.182c0.118,0.099,0.264,0.15,0.413,0.15c0.094,0,0.188-0.02,0.276-0.062 c0.228-0.108,0.372-0.335,0.372-0.586v-2.135c1.74-0.761,2.84-2.231,2.84-3.846C19.405,8.862,17.456,7.073,14.9,6.707z M8.885,12.552c-0.019,0.003-0.032,0.018-0.051,0.022c-0.101,0.022-0.2,0.056-0.281,0.123l-2.76,2.28v-2.161 c0-0.275-0.175-0.521-0.434-0.612C3.253,11.467,1.89,9.871,1.89,8.138c0-2.474,2.68-4.487,5.975-4.487 c2.604,0,4.801,1.265,5.617,3.014c0.187,0.401,0.302,0.823,0.33,1.268c0.005,0.069,0.028,0.134,0.028,0.205 c0,1.819-1.481,3.438-3.706,4.129c-0.115,0.037-0.224,0.08-0.343,0.111C9.497,12.455,9.196,12.513,8.885,12.552z M15.703,13.809 c-0.259,0.091-0.434,0.336-0.434,0.612v1.199l-1.723-1.422c-0.095-0.079-0.211-0.129-0.333-0.144 c-0.219-0.028-0.431-0.068-0.636-0.121c-0.545-0.14-1.023-0.364-1.433-0.64c2.423-0.969,3.99-2.942,3.99-5.155 c0-0.024-0.004-0.047-0.005-0.071c1.718,0.385,2.98,1.553,2.98,2.948C18.11,12.202,17.165,13.299,15.703,13.809z"></path>
              <path fill="none" d="M4.68,7.591h6.167c0.358,0,0.648-0.29,0.648-0.648s-0.29-0.648-0.648-0.648H4.68 c-0.358,0-0.648,0.29-0.648,0.648S4.323,7.591,4.68,7.591z"></path>
              <path fill="none" d="M8.709,8.636H4.68c-0.358,0-0.648,0.29-0.648,0.648c0,0.358,0.29,0.648,0.648,0.648h4.028 c0.358,0,0.648-0.29,0.648-0.648C9.356,8.926,9.067,8.636,8.709,8.636z"></path>
            </svg>
          </h4>
        </li>
        <!-- Buddies -->
        <li class="item3" tooltip="Buddies" ng-click="changeFeed('buddies')" ng-class="{'active':activeFeed === 'buddies'}">
          <h4>
            <svg class="svg-icon" viewBox="0 0 100 100">
              <path fill="none" d="M58.289,27.857c3.705,2.323,6.303,6.254,6.777,10.817c1.51,0.706,3.188,1.112,4.965,1.112 c6.492,0,11.752-5.261,11.752-11.751c0-6.491-5.26-11.752-11.752-11.752C63.602,16.284,58.387,21.451,58.289,27.857z M50.59,51.919 c6.49,0,11.752-5.262,11.752-11.752S57.08,28.416,50.59,28.416s-11.754,5.262-11.754,11.752S44.1,51.919,50.59,51.919z M55.574,52.72h-9.971c-8.297,0-15.047,6.751-15.047,15.047v12.196l0.031,0.191l0.84,0.263c7.918,2.473,14.797,3.299,20.459,3.299 c11.059,0,17.469-3.153,17.865-3.354l0.785-0.398h0.084V67.767C70.621,59.471,63.871,52.72,55.574,52.72z M75.018,40.588h-9.895 c-0.107,3.959-1.797,7.524-4.469,10.088c7.375,2.193,12.77,9.032,12.77,17.11v3.758c9.77-0.359,15.4-3.127,15.771-3.314l0.785-0.398 h0.084V55.634C90.064,47.338,83.314,40.588,75.018,40.588z M29.969,39.787c2.299,0,4.438-0.671,6.25-1.814 c0.576-3.757,2.59-7.04,5.467-9.276c0.012-0.22,0.033-0.438,0.033-0.66c0-6.491-5.262-11.752-11.75-11.752 c-6.492,0-11.752,5.261-11.752,11.752C18.217,34.526,23.477,39.787,29.969,39.787z M40.523,50.676 c-2.66-2.551-4.344-6.097-4.467-10.032c-0.367-0.027-0.73-0.056-1.104-0.056h-9.971c-8.297,0-15.047,6.75-15.047,15.046v12.197 l0.031,0.189l0.84,0.264c6.352,1.984,12.021,2.897,16.945,3.185v-3.683C27.752,59.708,33.146,52.87,40.523,50.676z"></path>
            </svg>
          </h4>
        </li>
        <!-- Messages -->
        <li class="item4" tooltip="Messages" ng-click="changeFeed('messages');" ng-class="{'active':activeFeed === 'messages', 'pulsate': unreadPrivate !== 0}">
          <h4>
            <div class="dnr-feed-bubble" ng-show="unreadPrivate !== 0">{{unreadPrivate}}</div>
            <svg class="svg-icon" viewBox="0 0 512 512">
              <path d="M512,384c0,11.219-3.156,21.625-8.219,30.781L342.125,233.906L502.031,94c6.219,9.875,9.969,21.469,9.969,34V384z M256,266.75L478.5,72.063c-9.125-5-19.406-8.063-30.5-8.063H64c-11.109,0-21.391,3.063-30.484,8.063L256,266.75z M318.031,254.969 l-51.5,45.094C263.516,302.688,259.766,304,256,304s-7.516-1.313-10.531-3.938l-51.516-45.094L30.25,438.156 C40.063,444.313,51.563,448,64,448h384c12.438,0,23.938-3.688,33.75-9.844L318.031,254.969z M9.969,94C3.75,103.875,0,115.469,0,128 v256c0,11.219,3.141,21.625,8.219,30.781l161.641-180.906L9.969,94z"></path>
            </svg>
          </h4>
        </li>
        <li><h4></h4></li>
        <li class="itemDrag" id="dragbar">
          <h4>
            <svg class="svg-icon" viewBox="0 0 216 146">
              <path d="M179.452,69.334l-20.856-20.857c-1.033-1.032-2.255-1.548-3.666-1.548c-1.412,0-2.635,0.516-3.668,1.548 c-1.031,1.032-1.547,2.254-1.547,3.666v10.429H66.286V52.143c0-1.412-0.516-2.634-1.548-3.666c-1.033-1.032-2.255-1.548-3.667-1.548 c-1.412,0-2.634,0.516-3.666,1.548L36.548,69.334C35.516,70.365,35,71.588,35,73s0.516,2.634,1.548,3.666l20.857,20.857 c1.032,1.031,2.253,1.548,3.666,1.548c1.413,0,2.635-0.517,3.667-1.548c1.032-1.032,1.548-2.254,1.548-3.666v-10.43h83.429v10.43 c0,1.412,0.516,2.634,1.547,3.666c1.033,1.031,2.256,1.548,3.668,1.548c1.411,0,2.633-0.517,3.666-1.548l20.856-20.857 C180.484,75.634,181,74.412,181,73S180.484,70.365,179.452,69.334z"/>
            </svg>
          </h4>
        </li>
        <li><h4></h4></li>
        <!-- Settings -->
        <li class="itemGray" tooltip="Settings" ui-sref="social.settings">
          <h4>
            <svg class="svg-icon" viewBox="0 0 21.59 21.137">
              <path d="M18.622,8.145L18.077,6.85c0,0,1.268-2.861,1.156-2.971L17.554,2.24 c-0.116-0.113-2.978,1.193-2.978,1.193L13.256,2.9c0,0-1.166-2.9-1.326-2.9H9.561C9.396,0,8.317,2.906,8.317,2.906L6.999,3.441 c0,0-2.922-1.242-3.034-1.131L2.289,3.951C2.173,4.064,3.507,6.867,3.507,6.867L2.962,8.16C2.962,8.16,0,9.301,0,9.455v2.322 c0,0.162,2.969,1.219,2.969,1.219l0.545,1.291c0,0-1.268,2.859-1.157,2.969l1.678,1.643c0.114,0.111,2.977-1.195,2.977-1.195 l1.321,0.535c0,0,1.166,2.898,1.327,2.898h2.369c0.164,0,1.244-2.906,1.244-2.906l1.322-0.535c0,0,2.916,1.242,3.029,1.133 l1.678-1.641c0.117-0.115-1.22-2.916-1.22-2.916l0.544-1.293c0,0,2.963-1.143,2.963-1.299v-2.32 C21.59,9.199,18.622,8.145,18.622,8.145z M14.256,10.568c0,1.867-1.553,3.387-3.461,3.387c-1.906,0-3.461-1.52-3.461-3.387 s1.555-3.385,3.461-3.385C12.704,7.184,14.256,8.701,14.256,10.568z"/>
            </svg>
          </h4>
        </li>
        <!-- Logout -->
        <li class="itemGray" tooltip="Logout" ng-click="$root.logout()">
          <h4>
            <svg class="svg-icon" viewBox="0 0 512 512">
              <path d="M256.094,495.469c-123.516,0-224-100.5-224-224c0-63.875,27.391-124.875,75.172-167.375 c13.203-11.75,33.422-10.563,45.172,2.625s10.563,33.438-2.641,45.188c-34.125,30.375-53.703,73.938-53.703,119.563 c0,88.25,71.781,160,160,160c88.234,0,159.984-71.75,159.984-160c0-45.625-19.563-89.188-53.625-119.563 c-13.25-11.75-14.438-31.938-2.688-45.188c11.75-13.188,32-14.375,45.188-2.625c47.75,42.5,75.125,103.5,75.125,167.375 C480.078,394.969,379.578,495.469,256.094,495.469z M288.078,207.469v-160c0-17.688-14.313-32-31.984-32s-32,14.313-32,32v160 c0,17.688,14.328,32,32,32S288.078,225.156,288.078,207.469z"/>
            </svg>
          </h4>
        </li>
      </ul>
    </div>

    <div class="dnr-flow-content"
      ng-switch on="activeFeed">
      <!-- Headers -->
      <div class="dnr-flow-content-header animate-switch-header f-orange" ng-switch-when="news"><h4>News feed</h4></div>
      <div class="dnr-flow-content-header animate-switch-header f-yellow" ng-switch-when="global"><h4>Global Chat</h4></div>
      <div class="dnr-flow-content-header animate-switch-header f-lime" ng-switch-when="buddies">
        <h4>Buddies</h4>
        <div style="position: absolute; bottom:5px; right: 5px;"><h6><a ui-sref="social.users">all users</a></h6></div>
      </div>
      <div class="dnr-flow-content-header animate-switch-header f-teal cursor" ng-switch-when="messages" ng-click="MessageService.closeChat()">
        <h4 ng-show="!MessageService.chatOpen()">Messages</h4>
        <h4 ng-show="MessageService.chatOpen()">
          <svg class="svg-icon" viewBox="0 0 512 512">
            <path d="M512,384c0,11.219-3.156,21.625-8.219,30.781L342.125,233.906L502.031,94c6.219,9.875,9.969,21.469,9.969,34V384z M256,266.75L478.5,72.063c-9.125-5-19.406-8.063-30.5-8.063H64c-11.109,0-21.391,3.063-30.484,8.063L256,266.75z M318.031,254.969 l-51.5,45.094C263.516,302.688,259.766,304,256,304s-7.516-1.313-10.531-3.938l-51.516-45.094L30.25,438.156 C40.063,444.313,51.563,448,64,448h384c12.438,0,23.938-3.688,33.75-9.844L318.031,254.969z M9.969,94C3.75,103.875,0,115.469,0,128 v256c0,11.219,3.141,21.625,8.219,30.781l161.641-180.906L9.969,94z"></path>
          </svg>
          {{target.name}}
        </h4>
      </div>
      <!-- Content -->
      <!-- News -->
      <div dnr-scroll class="animate-switch dnr-flow-content-inside bg-orange" ng-switch-when="news" ng-controller="TopicsCtrl">
        <div class="scroll-indicator"></div>
        <div class="dnr-flow-content-scroll" id="scroller">
          <div class="dnr-flow-vlelem" style="height:auto; padding: 0 5px 5px 60px; min-height: 50px">
            <a ui-sref="social.topics">
              <h6 style="line-height:25px; margin-bottom:0px!important; text-align: left;">
                Write new
              </h6>
            </a>
          </div>
          <div class="dnr-flow-vlelem" ng-repeat="item in messages.slice().reverse() | orderBy:'createdAt'" style="height:auto; padding: 0 5px 5px 60px; min-height: 50px">
            <div class="avatar"></div>
            <a ui-sref="social.topic({'slug': item.titleslug})">
              <h6 style="line-height:25px; margin-bottom:0px!important; text-align: left;">
                <span>{{item.user.name}} {{item.createdAt | date:"'@' h:mm a"}}:</span><br/>
                {{item.title}}
              </h6> <!-- {{item.completed}} {{item.createdAt | date:"MM/dd/yyyy 'at' h:mma"}}-->
            </a>
          </div>
        </div>
      </div>
      <!-- Bulletin -->
      <div dnr-chatscroll class="animate-switch dnr-flow-content-inside bg-yellow" ng-switch-when="global" ng-controller="BulletinCtrl">
        <div class="scroll-indicator"></div>
        <div class="dnr-flow-content-scroll" id="scroller">
          <div class="dnr-flow-vlelem" ng-repeat="item in messages.slice().reverse() | orderBy:'createdAt'" style="height:auto; padding: 0 5px 5px 60px; min-height: 50px">
            <div class="avatar"></div>
            <h6 style="line-height:25px; margin-bottom:0px!important; text-align: left;">
              <span><a ui-sref="social.user({'id': item.byid})">{{item.byname}}</a> {{item.createdAt | date:"'@' h:mm a"}}:</span><br/>
              {{item.title}}
            </h6> <!-- {{item.completed}} {{item.createdAt | date:"MM/dd/yyyy 'at' h:mma"}}-->
          </div>
        </div>
        <div class="dnr-global-input">
          <form id="message-form" ng-submit="addMessage(newMessage)">
            <input type="text"  id="new-message" placeholder="Send a message" ng-model="newMessage" autofocus="">
            <button class="dnr-button" type="submit"><h5>Send</h5></button>
            <div style="clear:both"></div>
          </form>
        </div>
      </div>
      <!-- Buddies -->
      <div dnr-scroll class="animate-switch dnr-flow-content-inside bg-lime" ng-switch-when="buddies" ng-controller="BuddiesCtrl">
        <div class="scroll-indicator"></div>
        <div class="dnr-flow-content-scroll" id="scroller">
          <div class="dnr-flow-vlelem" ng-repeat="item in buddies">
            <div class="avatar" ng-show="isOnline(item._id)"></div>
            <a ui-sref="social.user({'id': item._id})"><h6 style="line-height:50px;">{{item.name}}</h6></a>
          </div>
        </div>
      </div>
      <!-- Messages -->
      <div dnr-scroll class="animate-switch dnr-flow-content-inside bg-teal" ng-switch-when="messages" ng-controller="MessageCtrl">
        <div class="scroll-indicator"></div>
        <div class="dnr-flow-content-scroll" id="scroller">
          <div ng-repeat="item in messages" ng-if="!MessageService.chatOpen()">
            <div class="dnr-flow-vlelem" ng-click="MessageService.openChat(item.users[0], item.users[1])">
              <div class="avatar" ng-show="isOnline(item.users[0])"></div>
              <h6 style="line-height:50px;">{{item.users[1]}}<span ng-show="messages[$index].undread !== 0">{{messages[$index].undread}}</span></h6>
            </div>
          </div>
          <div class="chatwindow" ng-if="MessageService.chatOpen()">
            <div class="chatwindow-messages">
              <div class="chatwindow-message" 
                 ng-repeat="message in target.messages"
                 ng-class="(message.who !== $root.currentUser._id) ? 'chatwindow-message-other' : 'chatwindow-message-me'">
                 {{message.message}}
              </div>
            </div>
          </div>
        </div>
        <div class="dnr-global-input" ng-if="MessageService.chatOpen()">
          <form id="chatwindow-form" ng-submit="addMessage(newMessage)">
            <input type="text" id="new-private" placeholder="Send a message" ng-model="newMessage" autofocus="">
            <button class="dnr-button" type="submit"><h5>Send</h5></button>
            <div style="clear:both"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="dnr-social" dnr-document ng-init="showE = true">
<!--     <div class="titlenav" ng-hide="scrolled">
      <div class="toplinks">
        <h2>Whatsup</h2>
      </div>
      <div class="documenttitle">
        <h4><span ng-show="navtracker.group !== ''">{{navtracker.group}} - </span>{{navtracker.title}}</h4>
      </div>
      <div class="gototop" ng-click="titleNavArrow()" ng-show="scrolled">
        <h5>
          <svg viewBox="0 0 64 64" class="fcenter" ng-class="{'rotate': scrolled === true}">
             <polygon points="32.002,15.512 3.57,44.784 7.381,48.487 32.002,23.137 56.623,48.488 60.43,44.784"/>
          </svg>
        </h5>
      </div>
    </div>

    <div class="navigation" ng-show="navigation">
      <ul class="double" style="width:80%;">
        <li class="bg-lime cursor" ui-sref="social.profile" ng-click="navigation = false">
          <div class="fcenter" style="width:50%">
            <h4 class="text-center">Profile</h4>
          </div>
        </li>
        <li class="bg-orange cursor" ui-sref="social.settings" ng-click="navigation = false">
          <div class="fcenter" style="width:50%">
            <h4 class="text-center">Settings</h4>
          </div>
        </li>
      </ul>
    </div> -->
    <div dnr-game></div>
    <div class="dnr-social-mask" ng-show="showE" ng-click="showE = false;"></div>
    <div class="dnr-social-scroll" ng-show="showE">
      <div class="social-view" ui-view=""></div>

    </div>

  </div>
</div>


